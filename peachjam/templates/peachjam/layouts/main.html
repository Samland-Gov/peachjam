{% extends 'peachjam/layouts/base.html' %}
{% load static %}
{% load sass_tags %}

{% block head-css %}
    <link rel="stylesheet" href="{% sass_src 'stylesheets/peachjam.scss' %}" type="text/css">
{% endblock %}

{% block head-js %}
  <script defer src="{% static 'bootstrap/dist/js/bootstrap.bundle.js' %}"></script>
  <script defer src="{% static 'lib/pdfjs/pdf.js' %}"></script>
  <!--  app-prod.js depends on pdf.js to be loaded-->
  <script defer src="{% static 'js/app-prod.js' %}"></script>

  {% if not DEBUG %}
    <!-- sentry -->
    <script defer src="https://browser.sentry-cdn.com/6.18.1/bundle.min.js" integrity="sha384-XOitiDSsTajhNQgwzQ7iHMlM2Q2ODCW6aw3m1QgMVrDOqsNhFao1VjB39qXNMOZW" crossorigin="anonymous"></script>
    <script>
    window.addEventListener('load', function() {
      Sentry.init({
        dsn: '{{ SENTRY_DSN_KEY }}',
        environment: '{{ SENTRY_ENVIRONMENT }}',
        whitelistUrls: [`${window.location.hostname}/static/js/.+.js$`]
        });
    });
    </script>
    {% if GOOGLE_ANALYTICS_ID %}
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id={{ GOOGLE_ANALYTICS_ID }}"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '{{ GOOGLE_ANALYTICS_ID}}');
      </script>
    {% endif %}
  {% endif %}
{% endblock %}

{% block header %}
  {% include 'peachjam/_header.html' %}
{% endblock %}
{% block body-content %}
  <main id="top">
    {% block page-content %}{% endblock %}
  </main>
{% endblock %}
{% block footer %}
  {% include 'peachjam/_footer.html' %}
{% endblock %}
